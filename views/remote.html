<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quay S·ªë</title>
    <script src="/socket.io.min.js"></script>
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            font-family: Arial, sans-serif;
            background-color: #f4f4f9;
        }
        button {
            border: none;
            background-color: transparent;
            padding: 0;
            cursor: pointer;
        }
        button img {
            width: 80vw; /* K√≠ch th∆∞·ªõc ·∫£nh */
            height: auto;
            transition: transform 0.3s ease, filter 0.3s ease;
        }
        button img:hover {
            transform: scale(1.1); /* Ph√≥ng to khi hover */
            filter: brightness(1.2); /* TƒÉng ƒë·ªô s√°ng khi hover */
        }
        button img:active {
            transform: scale(0.95) rotate(10deg); /* Nh·ªè l·∫°i v√† xoay khi click */
        }
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            50% { transform: translateX(5px); }
            75% { transform: translateX(-5px); }
        }
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        .shaking img {
            animation: shake 0.5s;
        }
        .pulsing img {
            animation: pulse 1s infinite;
        }
    </style>
</head>
<body>
    <button id="sendButton">
        <img src="/ICLClogo.png" alt="Logo">
    </button>

    <style>
        body {
          position: relative;
          overflow-x: hidden; /* NgƒÉn cu·ªôn ngang */
        }
        .snowflake {
          position: fixed;
          top: -50px;
          user-select: none;
          z-index: 9999;
          pointer-events: none;
          animation-name: fall;
          animation-timing-function: linear;
          animation-iteration-count: infinite;
        }
        
        @keyframes fall {
          0% {
            transform: translateY(0);
            opacity: 1;
          }
          50% {
            transform: translateY(0);
            opacity: 1;
          }
          100% {
            transform: translateY(100vh);
            opacity: 0;
          }
        }
        </style>
        <script>
        document.addEventListener("DOMContentLoaded", function () {
          const tetEmojis = ["üå∏", "üßß", "üéâ", "üèµÔ∏è"]; // C√°c emoji T·∫øt
          let snowflakeInterval = 100; // Th·ªùi gian ban ƒë·∫ßu gi·ªØa c√°c l·∫ßn t·∫°o (ms)
          let snowflakeCount = 0; // ƒê·∫øm s·ªë l·∫ßn t·∫°o tuy·∫øt
        
          const createSnowflake = () => {
            const snowflake = document.createElement("div");
            snowflake.className = "snowflake";
            snowflake.textContent = tetEmojis[Math.floor(Math.random() * tetEmojis.length)];
            snowflake.style.left = Math.random() * 100 + "vw"; // V·ªã tr√≠ ngang ng·∫´u nhi√™n
            snowflake.style.animationDuration = Math.random() * 3 + 10 + "s"; // T·ªëc ƒë·ªô r∆°i (3-6 gi√¢y)
            snowflake.style.fontSize = Math.random() * 15 + 25 + "px"; // K√≠ch th∆∞·ªõc (25-40px)
            document.body.appendChild(snowflake);
        
            // X√≥a emoji sau khi ho√†n th√†nh
            snowflake.addEventListener("animationend", () => {
              snowflake.remove();
            });
          };
        
          const startSnowfall = () => {
            const intervalId = setInterval(() => {
              createSnowflake();
              snowflakeCount++;
        
              // Gi·∫£m t·ªëc ƒë·ªô t·∫°o d·∫ßn theo th·ªùi gian
              if (snowflakeCount % 20 === 0 && snowflakeInterval < 2000) {
                snowflakeInterval += 200; // TƒÉng th·ªùi gian gi·ªØa c√°c l·∫ßn t·∫°o
                clearInterval(intervalId); // D·ª´ng interval c≈©
                startSnowfall(); // B·∫Øt ƒë·∫ßu v·ªõi interval m·ªõi
              }
        
              // D·ª´ng hi·ªáu ·ª©ng sau m·ªôt kho·∫£ng th·ªùi gian
            //   if (snowflakeCount > 15) {
            //     clearInterval(intervalId);
            //   }
            }, snowflakeInterval);
          };
        
          startSnowfall(); // B·∫Øt ƒë·∫ßu hi·ªáu ·ª©ng
        });
        </script>

    <script>
        const socket = io();
        const sendButton = document.getElementById('sendButton');

        sendButton.addEventListener('click', () => {
            const message = { action: "quay so" };

            // Th√™m hi·ªáu ·ª©ng rung v√† xung nh·ªãp v√†o ·∫£nh
            sendButton.classList.add('shaking');
            sendButton.classList.add('pulsing');

            // G·ª≠i th√¥ng ƒëi·ªáp ƒë·∫øn server
            socket.send(JSON.stringify(message));

            // X√≥a hi·ªáu ·ª©ng rung sau 0.5 gi√¢y
            setTimeout(() => {
                sendButton.classList.remove('shaking');
            }, 500);

            // T·∫°m th·ªùi disable n√∫t (n·∫øu c·∫ßn)
            sendButton.disabled = true;

            setTimeout(() => {
                sendButton.disabled = false;
            }, 3000);
        });

        socket.on('message', (data) => {
            console.log('Server response:', data);
            sendButton.classList.remove('pulsing');
        });
    </script>
</body>
</html>